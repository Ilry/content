-- Built by Take your Time Generator at 23:19 23/08/2020
CREATE TABLE IF NOT EXISTS TakeYourTimeCostChanges (Type TEXT, Era INT, CostID INT, Value REAL, CalculatedPower1 REAL, CalculatedPower2 REAL);
UPDATE Eras_XP1 SET GameEraMinimumTurns = GameEraMinimumTurns*MIN((MIN(COALESCE((SELECT CalculatedPower1 FROM TakeYourTimeCostChanges WHERE Era IS NULL AND Type = "Tech" LIMIT 1), 1) * COALESCE((SELECT AVG(Value) FROM TakeYourTimeCostChanges WHERE Era IS NOT NULL AND Era = (SELECT ChronologyIndex FROM Eras WHERE Eras.EraType = Eras_XP1.EraType) AND Type = "Tech" GROUP BY Era LIMIT 1), 1), COALESCE((SELECT CalculatedPower1 FROM TakeYourTimeCostChanges WHERE Era IS NULL AND Type = "Civic" LIMIT 1), 1) * COALESCE((SELECT AVG(Value) FROM TakeYourTimeCostChanges WHERE Era IS NOT NULL AND Era = (SELECT ChronologyIndex FROM Eras WHERE Eras.EraType = Eras_XP1.EraType) AND Type = "Civic" GROUP BY Era LIMIT 1), 1))), ((((MIN(COALESCE((SELECT CalculatedPower1 FROM TakeYourTimeCostChanges WHERE Era IS NULL AND Type = "Tech" LIMIT 1), 1) * COALESCE((SELECT AVG(Value) FROM TakeYourTimeCostChanges WHERE Era IS NOT NULL AND Era = (SELECT ChronologyIndex FROM Eras WHERE Eras.EraType = Eras_XP1.EraType) AND Type = "Tech" GROUP BY Era LIMIT 1), 1), COALESCE((SELECT CalculatedPower1 FROM TakeYourTimeCostChanges WHERE Era IS NULL AND Type = "Civic" LIMIT 1), 1) * COALESCE((SELECT AVG(Value) FROM TakeYourTimeCostChanges WHERE Era IS NOT NULL AND Era = (SELECT ChronologyIndex FROM Eras WHERE Eras.EraType = Eras_XP1.EraType) AND Type = "Civic" GROUP BY Era LIMIT 1), 1)))-1)*0.8)+1)), GameEraMaximumTurns = GameEraMaximumTurns*MAX(MIN((MIN(COALESCE((SELECT CalculatedPower1 FROM TakeYourTimeCostChanges WHERE Era IS NULL AND Type = "Tech" LIMIT 1), 1) * COALESCE((SELECT AVG(Value) FROM TakeYourTimeCostChanges WHERE Era IS NOT NULL AND Era = (SELECT ChronologyIndex FROM Eras WHERE Eras.EraType = Eras_XP1.EraType) AND Type = "Tech" GROUP BY Era LIMIT 1), 1), COALESCE((SELECT CalculatedPower1 FROM TakeYourTimeCostChanges WHERE Era IS NULL AND Type = "Civic" LIMIT 1), 1) * COALESCE((SELECT AVG(Value) FROM TakeYourTimeCostChanges WHERE Era IS NOT NULL AND Era = (SELECT ChronologyIndex FROM Eras WHERE Eras.EraType = Eras_XP1.EraType) AND Type = "Civic" GROUP BY Era LIMIT 1), 1))), 1), ((((MIN(COALESCE((SELECT CalculatedPower1 FROM TakeYourTimeCostChanges WHERE Era IS NULL AND Type = "Tech" LIMIT 1), 1) * COALESCE((SELECT AVG(Value) FROM TakeYourTimeCostChanges WHERE Era IS NOT NULL AND Era = (SELECT ChronologyIndex FROM Eras WHERE Eras.EraType = Eras_XP1.EraType) AND Type = "Tech" GROUP BY Era LIMIT 1), 1), COALESCE((SELECT CalculatedPower1 FROM TakeYourTimeCostChanges WHERE Era IS NULL AND Type = "Civic" LIMIT 1), 1) * COALESCE((SELECT AVG(Value) FROM TakeYourTimeCostChanges WHERE Era IS NOT NULL AND Era = (SELECT ChronologyIndex FROM Eras WHERE Eras.EraType = Eras_XP1.EraType) AND Type = "Civic" GROUP BY Era LIMIT 1), 1)))-1)*1.0)+1));