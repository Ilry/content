<?xml version="1.0" encoding="utf-8"?>
<GameData>
	<!-- 1 能力 Ability -->
	<!-- 1.1 定义一个能力 Define an ability -->
	<Types>
		<Row Type="ABILITY_GREAT_WALL_STEP_1" Kind="KIND_ABILITY"/>
	</Types>
	
	<!-- 1.2 指定这个能力对哪一种单位有效 Denote the target of this debuff ability -->
	<!-- CLASS_ALL_COMBAT_UNITS 对所有军事单位有效 Takes effect on all combat units -->

	<TypeTags>
		<Row Type="ABILITY_GREAT_WALL_STEP_1" Tag="CLASS_ALL_COMBAT_UNITS"/>
	</TypeTags>

	<!-- 1.3 这个能力的名称、描述和是否常时有效 The name, description and "inactive" of the ability -->
	<!-- 由于这个debuff能力要单位走近长城才会有效，所以要设定为inactive Because this debuff ability activates only when the unit is adjacent to the Great Wall, so it should be inactive -->

	<UnitAbilities>
		<Row UnitAbilityType="ABILITY_GREAT_WALL_STEP_1" Name="LOC_ABILITY_GREAT_WALL_STEP_1_NAME" Description="LOC_ABILITY_GREAT_WALL_STEP_1_DESCRIPTION" Inactive="true"/>
	</UnitAbilities>

	<!-- 2 修改器 Modifiers -->
	<!-- 游戏中的许多效果由修改器产生，现在首先要创造一个减低速度的修改器，然后将这个修改器附加到先前定义的debuff能力，则所有拥有debuff能力的单位都会减少移动力。 -->
	<!-- Many effects in the game are generated by Modifiers. Now we must make a modifier to reduce movement, then attach this modifier on the debuff ability we created before, so that all units with the debuff ability will have reduced movement. -->

	<!-- 2.1 ModifierID, ModifierType -->
	<!-- ModifierID是Modifier的名称，不能与游戏任何既存Modifier重复 ModifierID is the name of the Modifier, and cannot be the same with all other existing ModifierID. -->
	<!-- ModifierType是Modifier的種類，可以使用遊戲已經存在的ModifierType ModifierType is the type of the Modifier. You may use ModifierType already existing in the game. -->
	<!-- 这次使用的ModifierType是MODIFIER_PLAYER_UNIT_ADJUST_MOVEMENT，能够调整单位的移动力 The ModifierType we are using is MODIFIER_PLAYER_UNIT_ADJUST_MOVEMENT, which can adjust the movement of a single unit. -->

	<Modifiers>
		<Row>
			<ModifierId>MODFEAT_PHANTA_GREAT_WALL_DEBUFF_MOVEMENT_STEP_2</ModifierId>
			<ModifierType>MODIFIER_PLAYER_UNIT_ADJUST_MOVEMENT</ModifierType>
		</Row>
	</Modifiers>

	<!-- 2.2 ModifierArgument -->
	<!-- 许多ModifierType都可以用ModifierArgument输入调整参数，这次的Amount代表移动力的调整，负数即为减速 -->

	<ModifierArguments>
		<Row>
			<ModifierId>MODFEAT_PHANTA_GREAT_WALL_DEBUFF_MOVEMENT_STEP_2</ModifierId>
			<Name>Amount</Name>
			<Value>-1</Value>
		</Row>
	</ModifierArguments>

	<!-- 2.3 UnitAbilityModifiers -->
	<!-- 将制作好的Modifier附加到目标上，这次的Modifier要附加到第1步制作的debuff能力上 Attach the Modifier on the target. This time, the Modifier needs to be attached to the debuff ability we defined in Step 1-->
	<!-- debuff能力是一个UnitAbility，需要用UnitAbilityModifiers进行附加 The debuff ability is a UnitAbility, and needs to be attached via UnitAbilityModifiers -->

	<UnitAbilityModifiers>
		<Row>
			<UnitAbilityType>ABILITY_GREAT_WALL_STEP_1</UnitAbilityType>
			<ModifierId>MODFEAT_PHANTA_GREAT_WALL_DEBUFF_MOVEMENT_STEP_2</ModifierId>
		</Row>
	</UnitAbilityModifiers>

	<!-- 3 讓長城釋放debuff Let the Great Wall applies the debuff -->

	<!-- 3.1 这次，我们同样需要一个修改器，让长城改良设施将debuff能力附加在邻近敌人单位上 We need another Modifier, so that the Great Wall improvement grants the debuff ability on nearby enemy units -->
	<!-- 这次使用的ModifierType是MODIFIER_ALL_UNITS_GRANT_ABILITY，对所有单位不分敌我附加能力 The ModifierType we are using is MODIFIER_ALL_UNITS_GRANT_ABILITY, which grants abilities to all units, friends and foes alike. -->
	<!-- 但我们不想地图上所有单位都受到debuff，所以加入SubjectRequirementSet来限制只有相邻敌方单位被附加debuff能力。 But we don't want all units on the map receive the debuff, so we uses SubjectRequirementSet to put a limit, so that only the adjacent enemy units are affected -->
	<!-- 为了方便起见，我们这次使用VARU_ADJACENT_AT_WAR_REQUIREMENTS（印度战象对相邻敌方单位附加效果），熟习后可以自行制作RequirementSet和Requirement For convenience, we use VARU_ADJACENT_AT_WAR_REQUIREMENTS (that is how Varu unit applies debuff on enemy units). You may define your own RequirementSet and Requirement if you become more familiar about making mods. -->

	<Modifiers>
        <Row>
            <ModifierId>MODFEAT_PHANTA_GREAT_WALL_GRANT_DEBUFF_STEP_3</ModifierId>
            <ModifierType>MODIFIER_ALL_UNITS_GRANT_ABILITY</ModifierType>
            <SubjectRequirementSetId>VARU_ADJACENT_AT_WAR_REQUIREMENTS</SubjectRequirementSetId>
        </Row>
    </Modifiers>

	<!-- 3.2 这次的ModifierArgument，用AbilityType代表附加的能力，这儿选择第1步定义的debuff能力 The ModifierArgument this time. AbilityType refers to the ability to be granted. Choose the debuff ability we defined in Step 1 -->
	
	<ModifierArguments>
		<Row>
			<ModifierId>MODFEAT_PHANTA_GREAT_WALL_GRANT_DEBUFF_STEP_3</ModifierId>
			<Name>AbilityType</Name>
			<Value>ABILITY_GREAT_WALL_STEP_1</Value>
		</Row>
	</ModifierArguments>

	<!-- 3.3 将“会相邻敌人上debuff”的修改器附加在长城 Attach the "apply debuff on adjacent enemies" Modifier to the Great Wall -->
	<!-- 长城是一个改良设施，使用ImprovementModifiers进行附加 -->

	<ImprovementModifiers>
		<Row>
			<ImprovementType>IMPROVEMENT_GREAT_WALL</ImprovementType>
			<ModifierId>MODFEAT_PHANTA_GREAT_WALL_GRANT_DEBUFF_STEP_3</ModifierId>
		</Row>
	</ImprovementModifiers>

</GameData>
